

FrontEnd.fsmount
NumberCrunchers[n].fsmount

Either null or path to a common mount point. If fsmount is null, then file
transfer between servers is done using http(s) protocols. Otherwise, files
are transferred by direct copying.

For example, FE has fsmount='/mount_fe' and it communicates with NC, which has
fsmount defined as '/mount_nc'. Suppose that file '/mount_fe/x/y/z.dat' needs
to be sent from FE to the NC. Then, FE sends path '/x/y/z.dat' to NC via http(s),
and NC attempts to copy file from '/mount_nc/x/y/z.dat'. If fsmount is null,
FE and NC use http(s) for sending files and not just file paths.

Limitations:
1) fsmount fields should be either null or valid paths for all servers in the
system
2) currently, only fsmount='/' are supported

Default:  fsmount=null

Direct file copy is recommended if http(s) fails, which is sometimes observed
in localhost-based setups.


{

  "_comment"  : [
    "====================================================================================",
    "                    jsCoFE Configuration for desktop setup mode                     ",
    "====================================================================================",
    "   13.04.2022 "
  ],

  "Desktop"  : {
    "clientApp"  : "/bin/bash",
    "args"       : ["-c","open -a 'Google Chrome' $feURL$clientURL"],
    "__args"       : ["-c","open -a Firefox $feURL$clientURL"]
  },

  "FrontEnd" : {
    "protocol"         : "http",
    "host"             : "localhost",
    "port"             : 8081,
    "externalURL"      : "http://localhost:8081",
    "localSetup"       : true,
    "stoppable"        : false,
    "exclude_tasks"    : ["TaskAmple"],
    "fsmount"          : "/",
    "update_rcode"     : 212,
    "userDataPath"     : "./cofe-users",
    "projectsPath"     : {
        "***"   : { "path" : "./cofe-projects",
                    "type" : "volume",
                    "diskReserve" : 1000
                  }
    },
    "jobs_safe"        : {
        "path"     : "./cofe-nc-storage/jobs_safe",
        "capacity" : 10
    },
    "facilitiesPath"   : "./cofe-facilities",
    "ICAT_wdsl"        : "https://icat02.diamond.ac.uk/ICATService/ICAT?wsdl",
    "ICAT_ids"         : "https://ids01.diamond.ac.uk/ids",
    "auth_software"    : {
      "arpwarp" : {
        "desc_software" : "Arp/wArp Model Building Software from EMBL-Hamburg",
        "icon_software" : "task_arpwarp",
        "desc_provider" : "EMBL Outstation in Hamburg",
        "icon_provider" : "org_emblhamburg",
        "auth_url"      : "https://arpwarp.embl-hamburg.de/api/maketoken/?reqid=$reqid&addr=1.2.3.4&cburl=$cburl"
      },
      "gphl-buster"  : {
        "desc_software" : "Global Phasing Ltd. Software Suite",
        "icon_software" : "task_buster",
        "desc_provider" : "Global Phasing Ltd.",
        "icon_provider" : "org_gphl",
        "auth_url"      : "https://www.globalphasing.com/cgi-bin/ccp4_licence.cgi?reqid=$reqid&addr=1.2.3.4&cburl=$cburl",
        "__auth_url"    : "https://arpwarp.embl-hamburg.de/api/maketoken/?reqid=$reqid&addr=1.2.3.4&cburl=$cburl"
      }
    },
    "bootstrapHTML"    : "./bootstrap/jscofe.min.html",
    "maxRestarts"      : 100,
    "fileCapSize"      : 500000,
    "regMode"          : "email",
    "sessionCheckPeriod" : 2000,
    "ration"           : {
        "storage"   : 3000,
        "cpu_day"   : 24,
        "cpu_month" : 240
    },
    "cloud_mounts"     : {
      "My Computer"    : "/",
      "Home"           : ["$HOME","$USERPROFILE"],
      "CCP4 Examples"  : ["$CDEMODATA","$CEXAM"],
      "Tutorials"      : ["$CTUTORIALS","$CEXAM/cloud_tutorials"]
    }
  },

  "FEProxy" : {
    "protocol"         : "http",
    "host"             : "localhost",
    "port"             : 8085,
    "externalURL"      : "",
    "exclusive"        : true,
    "stoppable"        : false,
    "localisation"     : 0
  },

  "NumberCrunchers" : [
    {
      "serNo"            : 0,
      "name"             : "local-nc",
      "in_use"           : true,
      "protocol"         : "http",
      "host"             : "localhost",
      "port"             : 8083,
      "externalURL"      : "http://localhost:8083",
      "exclusive"        : true,
      "stoppable"        : false,
      "fsmount"          : "/",
      "capacity"         : 4,
      "max_nproc"        : 3,
      "exclude_tasks"    : [],
      "fasttrack"        : 1,
      "storage"          : "./cofe-nc-storage",
      "jobs_safe"        : {
          "path"     : "./cofe-nc-storage/jobs_safe",
          "capacity" : 10
      },
      "exeType"          : "SHELL",
      "exeData"          : "",
      "jobCheckPeriod"   : 2000,
      "sendDataWaitTime" : 1000,
      "maxSendTrials"    : 10,
      "jobRemoveTimeout" : 10000,
      "maxRestarts"      : 100,
      "fileCapSize"      : 500000
    },
    {
      "serNo"            : 1,
      "name"             : "client",
      "in_use"           : true,
      "protocol"         : "http",
      "host"             : "localhost",
      "port"             : 8084,
      "externalURL"      : "http://localhost:8084",
      "exclusive"        : true,
      "stoppable"        : false,
      "fsmount"          : "/",
      "capacity"         : 4,
      "exclude_tasks"    : [],
      "fasttrack"        : 1,
      "storage"          : "./cofe-client-storage",
      "exeType"          : "CLIENT",
      "exeData"          : "",
      "jobCheckPeriod"   : 2000,
      "sendDataWaitTime" : 1000,
      "maxSendTrials"    : 10,
      "jobRemoveTimeout" : 10000,
      "maxRestarts"      : 100,
      "fileCapSize"      : 500000
    }
  ],

  "Emailer" : {
    "type"               : "nodemailer",
    "emailFrom"          : "CCP4 Cloud <ccp4.cofe@gmail.com>",
    "maintainerEmail"    : "ccp4.cofe@gmail.com",
    "host"               : "smtp.gmail.com",
    "port"               : 465,
    "secure"             : true,
    "auth"               : {
      "file" : "auth_pass.txt"
    }
  }

}




{

  "_comment"  : [
    "====================================================================================",
    "                    jsCoFE Configuration for desktop setup mode                     ",
    "===================================================================================="
  ],

  "Desktop"  : {
    "clientApp"  : "/bin/bash",
    "args"       : ["-c","open -a Firefox $feURL$clientURL"]
  },

  "FrontEnd" : {
    "protocol"         : "http",
    "host"             : "localhost",
    "port"             : 8081,
    "externalURL"      : "http://localhost:8081",
    "exclusive"        : true,
    "stoppable"        : false,
    "exclude_tasks"    : [],
    "fsmount"          : "/",
    "userDataPath"     : "./cofe-users",
    "projectsPath"     : "./cofe-projects",
    "facilitiesPath"   : "./cofe-facilities",
    "ICAT_wdsl"        : "https://icat02.diamond.ac.uk/ICATService/ICAT?wsdl",
    "ICAT_ids"         : "https://ids01.diamond.ac.uk/ids",
    "bootstrapHTML"    : "jscofe.html",
    "maxRestarts"      : 100,
    "fileCapSize"      : 500000,
    "regMode"          : "admin",
    "ration"           : {
        "storage"   : 3000,
        "cpu_day"   : 24,
        "cpu_month" : 240
    },
    "cloud_mounts"     : {
      "ccp4-examples"  : "$CCP4/share/ccp4i2/demo_data",
      "home"           : ["$HOME","$USERPROFILE"]
    }
  },

  "NumberCrunchers" : [
    {
      "serNo"            : 0,
      "name"             : "local-nc",
      "in_use"           : true,
      "protocol"         : "http",
      "host"             : "localhost",
      "port"             : 8082,
      "externalURL"      : "http://localhost:8082",
      "exclusive"        : true,
      "stoppable"        : false,
      "fsmount"          : "/",
      "capacity"         : 4,
      "max_nproc"        : 3,
      "exclude_tasks"    : [],
      "fasttrack"        : 1,
      "storage"          : "./cofe-nc-storage",
      "exeType"          : "SHELL",
      "exeData"          : "",
      "jobCheckPeriod"   : 2000,
      "sendDataWaitTime" : 1000,
      "maxSendTrials"    : 10,
      "jobRemoveTimeout" : 10000,
      "maxRestarts"      : 100,
      "fileCapSize"      : 500000
    },
    {
      "serNo"            : 1,
      "name"             : "client",
      "in_use"           : true,
      "protocol"         : "http",
      "host"             : "localhost",
      "port"             : 8083,
      "externalURL"      : "http://localhost:8083",
      "exclusive"        : true,
      "stoppable"        : false,
      "fsmount"          : "/",
      "capacity"         : 4,
      "exclude_tasks"    : [],
      "fasttrack"        : 1,
      "storage"          : "./cofe-client-storage",
      "exeType"          : "CLIENT",
      "exeData"          : "",
      "jobCheckPeriod"   : 2000,
      "sendDataWaitTime" : 1000,
      "maxSendTrials"    : 10,
      "jobRemoveTimeout" : 10000,
      "maxRestarts"      : 100,
      "fileCapSize"      : 500000
    }
  ],

  "Emailer" : {
    "type"               : "nodemailer",
    "emailFrom"          : "CCP4 on-line <ccp4.cofe@gmail.com>",
    "maintainerEmail"    : "ccp4.cofe@gmail.com",
    "host"               : "smtp.gmail.com",
    "port"               : 465,
    "secure"             : true,
    "auth"               : {
      "user" : "ccp4.cofe@gmail.com",
      "pass" : "ccp4.cofe.2016"
    }
  }

}
