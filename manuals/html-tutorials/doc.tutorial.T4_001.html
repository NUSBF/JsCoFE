
<!DOCTYPE html>

<html>
  <head>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FCVD2T7BGM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-FCVD2T7BGM');
    </script>
    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Refinement using REFMAC5 - Part 1: Simple Refinement &#8212; CCP4 Cloud 1.7 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="_static/contentui.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/contentui.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>CCP4 Cloud 1.7 documentation</span></a></h1>
        <h2 class="heading"><span>Refinement using REFMAC5 - Part 1: Simple Refinement</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        <a class="uplink" href="index.html">Contents</a>
        </p>

      </div>
      <div class="content" role="main">
        
        
  <div class="section" id="refinement-using-refmac5-part-1-simple-refinement">
<h1>Refinement using REFMAC5 - Part 1: Simple Refinement<a class="headerlink" href="#refinement-using-refmac5-part-1-simple-refinement" title="Permalink to this headline">¶</a></h1>
<p>Written by: Rob Nicholls</p>
<div class="section" id="preliminary-notes">
<h2>Preliminary notes<a class="headerlink" href="#preliminary-notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>It is essential for this tutorial that CCP4 Cloud is used in remote <a class="reference internal" href="_images/ccp4cloud_remote.png"><img alt="ccp4cloud_remote" src="_images/ccp4cloud_remote.png" style="width: 20px; height: 20px;" /></a> or desktop <a class="reference internal" href="_images/ccp4cloud_desktop.png"><img alt="ccp4cloud_desktop" src="_images/ccp4cloud_desktop.png" style="width: 20px; height: 20px;" /></a> mode.</li>
</ul>
<ul class="simple">
<li><dl class="first docutils">
<dt>The tutorial project is initialised in <em>Hop-on</em> mode. This means that:</dt><dd><ol class="loweralpha">
<li>The structure is already phased and built</li>
<li>Protein sequence is not imported (and not neeeded)</li>
<li>The <em>Task List</em> is limited to a subset of tasks relevant to structure completion and refinement; if necessary, it can be switched to the full mode.</li>
</ol>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="tutorial">
<h2>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">1.</span> <span class="pre">Reflection</span> <span class="pre">data</span> <span class="pre">(rnase.mtz),</span> <span class="pre">Phases</span> <span class="pre">(rnase.mtz)</span> <span class="pre">and</span> <span class="pre">Atomic</span> <span class="pre">coordinates</span> <span class="pre">(rnase.pdb)</span> <span class="pre">are</span> <span class="pre">already</span> <span class="pre">imported</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">project</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">2.</span> <span class="pre">Perform</span> <span class="pre">model</span> <span class="pre">refinement</span> <span class="pre">using</span> <span class="pre">default</span> <span class="pre">settings</span></code></p>
<ul class="simple">
<li>Click the green <strong>+</strong> button in order to add a follow-on job. Choose <strong>Refinement with Refmac</strong> from the task list (if not yet in the <strong>Suggested</strong> task list, you can find it in the <strong>Refinement and Model Building</strong> section of the <strong>Full list</strong> of tasks).</li>
<li>Change the <strong>job description</strong> field to something meaningful, like: “Refine with default settings”.</li>
<li>Click the green arrow at the top of the window to run the job. While a job is running, you can safely click the red cross at the top-right of the window in order to close the job dialog, and the job will continue running in the background. To view the current status of a running job, or to view the results of a completed job, double click on the job in the tree.</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">3.</span> <span class="pre">Run</span> <span class="pre">refinement</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">different</span> <span class="pre">data-geometry</span> <span class="pre">weight</span></code></p>
<p>We now want to try refinement with different parameters, in parallel with the first job that is already running.</p>
<ul class="simple">
<li>Ensure that the existing refinement job is selected in the project tree, and click the <strong>Clone job</strong> button on the left side of the screen.</li>
<li>A refinement job window will open – in the <strong>Basic options</strong> section, change <strong>Overall data-geometry weight</strong> to <strong>Fixed</strong> with a value of <strong>1.0</strong>.</li>
<li>Give the job a meaningful description.</li>
<li>Click the green arrow at the top of the window to run the job. Again, close the job dialog window while it runs.</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">4.</span> <span class="pre">Run</span> <span class="pre">refinement</span> <span class="pre">with</span> <span class="pre">different</span> <span class="pre">B-factor</span> <span class="pre">parameterisation</span></code></p>
<ul class="simple">
<li>Clone the job again.</li>
<li>Open the <strong>Model Parameterisation</strong> section, and change <strong>Atomic B-factors</strong> to <strong>Anisotropic</strong>.</li>
<li>Give the job a meaningful description.</li>
<li>Click the green arrow at the top of the window to run the job, and close the job dialog window while it runs.</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">5.</span> <span class="pre">Inspect</span> <span class="pre">the</span> <span class="pre">refinement</span> <span class="pre">results</span></code></p>
<p>In the main project tree, you can now see three refinement jobs that have been run in parallel, all starting from the same structure revision.</p>
<ul class="simple">
<li>When the jobs finish, the final R-factors are appended to the job title. Which of the three jobs produced the best R-factors, thus presumably the best model?</li>
<li>More detailed output can be found by double-clicking on a job. Once the jobs have finished, double-click on the last refinement job in the tree. Does refinement seem to have converged after the default 10 cycles?</li>
<li>Consider the difference between the R-factors before and after refinement… why do you think they have improved so much?</li>
</ul>
<p>Note that CCP4 Cloud’s Verdict is different for the three jobs - this suggests what parameters you could try changing in order to improve refinement.</p>
<p><code class="docutils literal notranslate"><span class="pre">6.</span> <span class="pre">Inspect</span> <span class="pre">the</span> <span class="pre">refined</span> <span class="pre">model</span> <span class="pre">in</span> <span class="pre">Coot</span></code></p>
<ul class="simple">
<li>Select the last refinement job in the tree.</li>
<li>Click the green <strong>+</strong> button in order to add a follow-on job, and select the <strong>Model Building with Coot</strong> task in order to open the Coot job window.</li>
<li>By default, the structure revision corresponding to the output of your refinement job will be already selected for opening in Coot. But we also want to load the original model, so that we can compare the model before/after refinement. To do this: in <strong>Additional Structures</strong> select the job ID that corresponds to your <strong>hop on ccp4 cloud</strong> job (which may be called something like <strong>[0001-01] hop-on /structure/</strong>) – this will tell Coot to also open your original model and associated maps. Now run the job in order to open Coot.</li>
<li>Within Coot, open the Display Manager and repeatedly toggle the two models on and off, to visually compare differences between them. Does it seem that the coordinates corresponding to the model have changed much during refinement?</li>
<li>Now colour both models according to their B-factors – this is also done in the Display Manager. The models will be coloured on a blue-green-yellow-red scale to indicate low-to-high B-factors. Again, toggle the two models on and off. Does it seem that the B-factors have changed much during refinement? Does this shed any light on why the R-factors improved so much during refinement?</li>
<li>Now toggle off the model and map corresponding to the original structure revision, so that only the post-refinement model and map are displayed. Select <strong>Unmodelled blobs</strong> from Coot’s <strong>Validate</strong> menu. One large blob should be identified. Zoom into this region. What seems to be missing from the model?</li>
</ul>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        <a class="uplink" href="index.html">Contents</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.0.1.
    </div>
  </body>
</html>