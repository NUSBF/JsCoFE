
<!DOCTYPE html>

<html>
  <head>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FCVD2T7BGM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-FCVD2T7BGM');
    </script>
    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>10.7. Automatic Model Building with Modelcraft &#8212; CCP4 Cloud 1.7 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="_static/contentui.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/contentui.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="10.8. Automatic Model Building of RNA/DNA with Nautilus" href="doc.task.Nautilus.html" />
    <link rel="prev" title="10.6. Automated Model Building with Arp/wArp" href="doc.task.ArpWarp.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>CCP4 Cloud 1.7 documentation</span></a></h1>
        <h2 class="heading"><span>10.7. Automatic Model Building with Modelcraft</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="doc.task.ArpWarp.html"><span class="section-number">10.6. </span>Automated Model Building with Arp/wArp</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="doc.task.Nautilus.html"><span class="section-number">10.8. </span>Automatic Model Building of RNA/DNA with Nautilus</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <div class="section" id="automatic-model-building-with-modelcraft">
<h1><span class="section-number">10.7. </span>Automatic Model Building with Modelcraft<a class="headerlink" href="#automatic-model-building-with-modelcraft" title="Permalink to this headline">¶</a></h1>
<p>ModelCraft is an automated model-building pipeline for X-ray crystallography. It is based on the <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Buccaneer.html" rel="noopener noreferrer" target="_blank">BUCCANEER</a> and <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Nautilus.html" rel="noopener noreferrer" target="_blank">NAUTILUS</a> model-building pipelines, but with the following enhancements:</p>
<ul class="simple">
<li>Building of protein, RNA and DNA in a single pipeline.</li>
<li>Prelimary refinement of the input model using <a class="reference external" href="https://pure.york.ac.uk/portal/en/publications/sheetbend-software-for-model-morphing-of-atomic-models(497dd49d-c29c-4958-863b-18563a7dde17).html" rel="noopener noreferrer" target="_blank">SHEETBEND</a>.</li>
<li>Machine-learned pruning of protein residues and chains.</li>
<li>Density modification using <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Parrot.html" rel="noopener noreferrer" target="_blank">PARROT</a> and dummy-atom addition.</li>
<li>Addition of water molecules using <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.CootMB.html" rel="noopener noreferrer" target="_blank">COOT</a>.</li>
<li>Running for an increased number of cycles with automatic stopping criteria.</li>
<li>Selection of the output model from the cycle with the lowest R-free.</li>
<li>Final rebuilding of side chains using <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.CootMB.html" rel="noopener noreferrer" target="_blank">COOT</a>.</li>
</ul>
<div class="section" id="workflow">
<h2><span class="section-number">10.7.1. </span>Workflow<a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h2>
<p>If a starting model was provided, ModelCraft refines it with <a class="reference external" href="https://journals.iucr.org/d/issues/2020/12/00/di5041/" rel="noopener noreferrer" target="_blank">shift-field refinement</a>  using <a class="reference external" href="https://pure.york.ac.uk/portal/en/publications/sheetbend-software-for-model-morphing-of-atomic-models(497dd49d-c29c-4958-863b-18563a7dde17).html" rel="noopener noreferrer" target="_blank">SHEETBEND</a> followed by 10 cycles of <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Refmac.html" rel="noopener noreferrer" target="_blank">REFMAC</a></p>
<p>A <strong>single cycle of ModelCraft</strong> consists of the following seven steps:</p>
<ol class="arabic">
<li><p class="first"><strong>Prune incorrect protein chains, residues and side chains</strong> using <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.CootMB.html" rel="noopener noreferrer" target="_blank">COOT</a> followed by 5 cycles of <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Refmac.html" rel="noopener noreferrer" target="_blank">REFMAC</a>.</p>
<blockquote>
<div><p>The pruning algorithm deletes chains, residues and side chains using two neural networks, which were trained to predict main-chain and side-chain correctness by combining many validation metrics. <strong>This step is not performed on the first cycle or if the resolution is 2.3 Å or worse.</strong></p>
</div></blockquote>
</li>
<li><p class="first"><strong>Density modification</strong> using <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Parrot.html" rel="noopener noreferrer" target="_blank">Parrot</a> (map improvement step).</p>
</li>
<li><p class="first"><strong>Add dummy atoms</strong> using <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.CootMB.html" rel="noopener noreferrer" target="_blank">COOT</a> followed by 10 cycles of <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Refmac.html" rel="noopener noreferrer" target="_blank">REFMAC</a>.</p>
<blockquote>
<div><p>Dummy atoms are pseudo atoms that are added to an atomic model to represent unknown scattering matter. They do not have a chemical identity but are assigned an element, often oxygen, so their contribution to the structure factor equation can be calculated. As dummy atoms do not represent real atom sites with known bonding, they are refined without geometry restraints. However, at high resolution, it is often possible to determine individual atomic positions even with unrestrained refinement. At lower resolution, the unrestrained atoms will become over-fitted, but it could still be beneficial to include them even without accurate parameters. In ModelCraft, they are only used as a tool for phase improvement and are discarded after refinement. <strong>The dummy atom refinement is only accepted if it produces a lower free-R factor. Overwise, the map from the previous step will be used.</strong></p>
</div></blockquote>
</li>
<li><p class="first"><strong>Build protein</strong> using <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Buccaneer.html" rel="noopener noreferrer" target="_blank">BUCCANEER</a> followed by 10 cycles of <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Refmac.html" rel="noopener noreferrer" target="_blank">REFMAC</a>.</p>
</li>
<li><p class="first"><strong>Prune incorrect protein chains</strong> using <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.CootMB.html" rel="noopener noreferrer" target="_blank">COOT</a> followed by 5 cycles of <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Refmac.html" rel="noopener noreferrer" target="_blank">REFMAC</a>.</p>
<blockquote>
<div><p>Buccaneer may build small chain fragments in the solvent regions or through the density for other components. It is important to remove these so they do not block the building of RNA, DNA or ordered waters.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Build RNA and DNA</strong> using <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Nautilus.html" rel="noopener noreferrer" target="_blank">NAUTILUS</a> followed by 10 cycles of <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Refmac.html" rel="noopener noreferrer" target="_blank">REFMAC</a>.</p>
</li>
<li><p class="first"><strong>Add waters</strong> using <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.CootMB.html" rel="noopener noreferrer" target="_blank">COOT</a> followed by 10 cycles of <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Refmac.html" rel="noopener noreferrer" target="_blank">REFMAC</a>.</p>
<blockquote>
<div><p>As in the third step, the model with waters is only accepted if it has a better R-free than the model without waters.</p>
</div></blockquote>
</li>
</ol>
<p><strong>The model from the cycle with lowest R-free is chosen as the output</strong>. If the resolution is better than 2.5 Å and R-work is better than 30% ModelCraft <strong>rebuilds side chains</strong> using <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.CootMB.html" rel="noopener noreferrer" target="_blank">COOT</a> followed by 5 cycles of <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Refmac.html" rel="noopener noreferrer" target="_blank">REFMAC</a>. This side chain rebuilding step is performed once at the end of the pipeline to fix side chains that are either missing or predicted to be in incorrect conformations.</p>
</div>
<div class="section" id="input">
<h2><span class="section-number">10.7.2. </span>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h2>
<p>Two <strong>build modes</strong> are available. In <strong>basic mode</strong> ModelCraft uses only <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Buccaneer.html" rel="noopener noreferrer" target="_blank">BUCCANEER</a>, <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Nautilus.html" rel="noopener noreferrer" target="_blank">NAUTILUS</a> and <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Refmac.html" rel="noopener noreferrer" target="_blank">REFMAC</a>. <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Parrot.html" rel="noopener noreferrer" target="_blank">PARROT</a> density modification is only used on the first cycle.</p>
<p><strong>The pipeline will stop if the model does not improve</strong> for 4 cycles by default (setting this value to less than 1 makes ModelCraft run to the maximum number of cycles). A cycle must improve on the previous best value to be marked as an improvement. <strong>Improvement is measured by R-free</strong>.</p>
<p><strong>Before running ModelCraft:</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>Remove incorrect parts of the model</strong>. ModelCraft has steps for pruning the protein structure, but it may help the pipeline to do this yourself first.</li>
<li><strong>Include non-incorporated heavy atoms in the input model</strong> (i.e. not S or Se that are part of the protein) as doing so should improve the phases. ModelCraft will avoid clashes with these atoms so <strong>only include atoms if you are confident of their positions</strong>.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="output">
<h2><span class="section-number">10.7.3. </span>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p><strong>If ModelCraft didn’t produce a good output model:</strong></p>
<blockquote>
<div><ul class="simple">
<li>Improve the initial model or phases. For example, try another molecular replacement model or use <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Parrot.html" rel="noopener noreferrer" target="_blank">PARROT</a> or <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Acorn.html" rel="noopener noreferrer" target="_blank">ACORN</a> for density modification.</li>
<li>Interactively prune/build the output model in <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.CootMB.html" rel="noopener noreferrer" target="_blank">COOT</a> and re-submit that as an input model.</li>
<li>Try other model building programs (<a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.CCP4Build.html" rel="noopener noreferrer" target="_blank">CCP4Build</a>, <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.Buccaneer.html" rel="noopener noreferrer" target="_blank">Buccaneer</a>, <a class="reference external" href="https://cloud.ccp4.ac.uk/manuals/html-taskref/doc.task.ArpWarp.html" rel="noopener noreferrer" target="_blank">ARP/wARP</a>) with either the same input as ModelCraft or the partially-built output model.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="useful-links">
<h2><span class="section-number">10.7.4. </span>Useful links<a class="headerlink" href="#useful-links" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://paulsbond.co.uk/modelcraft/" rel="noopener noreferrer" target="_blank">ModelCraft web page</a></p>
<p><a class="reference external" href="https://github.com/paulsbond/modelcraft" rel="noopener noreferrer" target="_blank">GitHub</a></p>
</div>
<div class="section" id="acknowledgements">
<h2><span class="section-number">10.7.5. </span>Acknowledgements<a class="headerlink" href="#acknowledgements" title="Permalink to this headline">¶</a></h2>
<p>This article uses materials kindly provided by <strong>Paul Bond</strong>, whose help is greatly appreciated.</p>
</div>
<div class="section" id="references">
<h2><span class="section-number">10.7.6. </span>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://etheses.whiterose.ac.uk/29044/" rel="noopener noreferrer" target="_blank">P Bond. Next generation software for placing atoms into electron density maps. PhD thesis, University of York (2021)</a></p>
<p><a class="reference external" href="https://doi.org/10.1107/S2059798320013170" rel="noopener noreferrer" target="_blank">Cowtan, K., Metcalfe, S. &amp; Bond, P. Shift-field refinement of macromolecular atomic models. Acta Crystallographica Section D 76, 1192–1200 (2020)</a></p>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="doc.task.ArpWarp.html"><span class="section-number">10.6. </span>Automated Model Building with Arp/wArp</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="doc.task.Nautilus.html"><span class="section-number">10.8. </span>Automatic Model Building of RNA/DNA with Nautilus</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.0.1.
    </div>
  </body>
</html>