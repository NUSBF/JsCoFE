<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#00020a">
  <script src="_static/javascripts/modernizr.js"></script>
  
  
  
    <title>5. Custom (user-created) project workflows &#8212; CCP4 Cloud 1.7 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/material.css" />
    <link rel="stylesheet" type="text/css" href="_static/contentui.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/contentui.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="6. CCP4 Cloud Archive" href="jscofe_archive.html" />
    <link rel="prev" title="4. Cloud Run facility in CCP4i interface" href="jscofe_i1toCloud.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=#005BBB data-md-color-accent=yellow>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#jscofe_custom_workflows" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="index.html" title="CCP4 Cloud 1.7 documentation"
           class="md-header-nav__button md-logo">
          
            <i class="md-icon">cloud</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">CCP4 Cloud 1.7 documentation</span>
          <span class="md-header-nav__topic"> 5. Custom (user-created) project workflows </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder=""Search""
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "_static/versions.json",
        target_loc = "../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">CCP4 Cloud 1.7 documentation</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="index.html" title="CCP4 Cloud 1.7 documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">cloud</i>
      
    </a>
    <a href="index.html"
       title="CCP4 Cloud 1.7 documentation">CCP4 Cloud 1.7 documentation</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="jscofe_interface.html" class="md-nav__link">1. CCP4 Cloud interface documentation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="jscofe_workflows.html" class="md-nav__link">2. Structure solution with CCP4 Cloud</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="jscofe_cloudrun.html" class="md-nav__link">3. Starting CCP4 Cloud projects from the command line</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="jscofe_i1toCloud.html" class="md-nav__link">4. Cloud Run facility in CCP4i interface</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> 5. Custom (user-created) project workflows </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">5. Custom (user-created) project workflows</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">"Contents"</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#jscofe-custom-workflows--page-root" class="md-nav__link">5. Custom (user-created) project workflows</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#what-are-custom-workflows-and-how-one-can-use-them" class="md-nav__link">5.1. What are custom workflows and how one can use them</a>
        </li>
        <li class="md-nav__item"><a href="#writing-the-workflow-script-wscript" class="md-nav__link">5.2. Writing the Workflow script (WScript)</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simple-mr-workflow" class="md-nav__link">5.2.1. Simple MR Workflow</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="#what-are-custom-workflows-and-how-one-can-use-them" class="md-nav__link">5.1. What are custom workflows and how one can use them</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#writing-the-workflow-script-wscript" class="md-nav__link">5.2. Writing the Workflow script (WScript)</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="#simple-mr-workflow" class="md-nav__link">5.2.1. Simple MR Workflow</a>
      
    
    </li></ul>
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="jscofe_archive.html" class="md-nav__link">6. CCP4 Cloud Archive</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="jscofe_CloudED.html" class="md-nav__link">7. CCP4 Cloud education capabilities</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="jscofe_QnA.html" class="md-nav__link">8. Questions and Answers</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="jscofe_troubleshooting.html" class="md-nav__link">9. Troubleshooting</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="jscofe_version_log.html" class="md-nav__link">10. CCP4 Cloud Version Log</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">"Contents"</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#jscofe-custom-workflows--page-root" class="md-nav__link">5. Custom (user-created) project workflows</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#what-are-custom-workflows-and-how-one-can-use-them" class="md-nav__link">5.1. What are custom workflows and how one can use them</a>
        </li>
        <li class="md-nav__item"><a href="#writing-the-workflow-script-wscript" class="md-nav__link">5.2. Writing the Workflow script (WScript)</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simple-mr-workflow" class="md-nav__link">5.2.1. Simple MR Workflow</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="custom-user-created-project-workflows">
<span id="custom-workflows"></span><h1 id="jscofe-custom-workflows--page-root"><span class="section-number">5. </span>Custom (user-created) project workflows<a class="headerlink" href="#jscofe-custom-workflows--page-root" title="Permalink to this heading">¶</a></h1>
<p>CCP4 Cloud projects can be developed automatically, using one of pre-defined
<a class="reference internal" href="jscofe_automated_workflows.html#workflows-guide"><span class="std std-ref">automatic workflows</span></a>, as well as <em>custom workflows</em>,
defined by user.</p>
<section id="what-are-custom-workflows-and-how-one-can-use-them">
<h2 id="what-are-custom-workflows-and-how-one-can-use-them"><span class="section-number">5.1. </span>What are custom workflows and how one can use them<a class="headerlink" href="#what-are-custom-workflows-and-how-one-can-use-them" title="Permalink to this heading">¶</a></h2>
<p>Custom workflow is a script (<em>WScript</em>) describing tasks that need to be
performed and the order of their invocation, <em>i.e.</em>, the workflow algorithm.
The script is placed in a plain text file with extension <code class="docutils literal notranslate"><span class="pre">.wscript</span></code>,
which can be created by most text editors, such as <em>vim</em>, <em>nano</em>, <em>notepad</em>
(Windows), <em>TextEdit</em> (Mac) and similar. Make sure that you save file as
“plain text” when using advanced editors such as <em>MS Word</em>, <em>Libre Office</em>
(not recommended).</p>
<p>Custom workflow can be started in one of 3 ways:</p>
<ul class="simple">
<li><p>Import <code class="docutils literal notranslate"><span class="pre">.wscript</span></code> file with other needed files, such as <code class="docutils literal notranslate"><span class="pre">.mtz</span></code>
(reflections, phases), <code class="docutils literal notranslate"><span class="pre">.pdb</span></code>, <code class="docutils literal notranslate"><span class="pre">.mmcif</span></code> (structure models),
<code class="docutils literal notranslate"><span class="pre">.cif</span></code> (ligand descriptions), <code class="docutils literal notranslate"><span class="pre">.lib</span></code> (restraint libraries),
<code class="docutils literal notranslate"><span class="pre">.seq</span></code>, in a <em>single</em> import task. After importing, the task will
start workflow automatically if <em>WScript</em> is correct and all necessary
data files are provided</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">.wscript</span></code> files to the set of data files in
<a class="reference internal" href="jscofe_cloudrun.html#cloudrun"><span class="std std-ref">CloudRun command file</span></a> (use generic <a class="reference internal" href="jscofe_cloudrun.html#cloudrun-file"><span class="std std-ref">FILE</span></a>
keyword), choose <a class="reference internal" href="jscofe_cloudrun.html#cloudrun-task"><span class="std std-ref">import</span></a> task and execute the
<code class="docutils literal notranslate"><span class="pre">CloudRun</span></code> utility. All file will be uploaded to CCP4 Cloud, project
created and workflow started automatically</p></li>
<li><p>Add <em>WScript</em> to the <em>My Workflows</em> list in the <em>Workflows</em> tab of the
<em>Task List</em>, after which it can be used as any other task in the
system.</p></li>
</ul>
</section>
<section id="writing-the-workflow-script-wscript">
<h2 id="writing-the-workflow-script-wscript"><span class="section-number">5.2. </span>Writing the Workflow script (WScript)<a class="headerlink" href="#writing-the-workflow-script-wscript" title="Permalink to this heading">¶</a></h2>
<p>The main idea behind workflows is to automate operations when the same
project (or branch of a project) needs to be repeated many (100s) times with
different input data, and <strong>WScript</strong> is limited to that purpose.</p>
<p>The easiest way to create a <strong>WScript</strong> file is through using <strong>Workflow Creator</strong>
in CCP4 Cloud. Login in your account and open <strong>Task List</strong> in any project.
Then open tab <strong>Workflows</strong>, scroll it to section <strong>My Workflows</strong> in the end
and push button <strong>Add workflow</strong>. This will launch <strong>Workflow Creator</strong> window
with a template script loaded. It makes a good sense to save the newly created
workflow in your personal library, therefore give it a unique <em>Workflow ID</em> on
top of the dialog window. For easier workflow identification in <strong>My Workflows</strong>
library, you may also change the colour of the workflow icon –– simply click on
it and choose from available options. Now you can save the script –– it will
appear in the <strong>My Workflows</strong> section of the <strong>Task List</strong>. You can run it as
any other task now, but doing so will result in an empty <strong>Job Dialog</strong>, because
we only saved a template, which does nothing.</p>
<p>Let’s give it a useful content now. Click on <strong>Edit</strong> button on the right from
the just created workflow in <strong>My Workflows</strong>, this opens <strong>Workflow Creator</strong>
again, with the previous content looking something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># * THIS IS A WORKFLOW SCRIPT TEMPLATE</span>
<span class="c1"># * DO NOT ASSUME THAT IT IS FUNCTIONAL WITHOUT EDITING</span>
<span class="c1"># * CONSULT DOCUMENTATION</span>
<span class="c1">#</span>

<span class="c1"># -----------------------------------------------------</span>
<span class="c1"># Give Workflow Title here</span>
<span class="c1"># -----------------------------------------------------</span>
<span class="c1"># Sun Dec 31 2023</span>
<span class="c1">#</span>

<span class="n">VERSION</span>  <span class="mf">1.0</span>    <span class="c1"># script version for backward compatibility</span>
<span class="n">DEBUG</span>    <span class="n">OFF</span>    <span class="c1"># ON/OFF</span>
<span class="n">COMMENTS</span> <span class="n">ON</span>     <span class="c1"># ON/OFF</span>
<span class="n">WID</span>      <span class="n">d</span><span class="o">-</span><span class="n">imp</span>  <span class="c1"># (optional) workflow ID for import mode</span>

<span class="c1"># ==========================================================================</span>
<span class="c1"># Workflow header -- EDIT AS NECESSARY</span>

<span class="c1"># General workflow descriptors</span>
<span class="n">NAME</span>     <span class="n">my</span> <span class="n">workflow</span>             <span class="c1"># to show in Job Tree</span>
<span class="n">ONAME</span>    <span class="n">my_wflow</span>                <span class="c1"># to use for naming output files</span>
<span class="n">TITLE</span>    <span class="n">My</span> <span class="n">Workflow</span> <span class="n">Title</span>       <span class="c1"># to display in Task List</span>
<span class="n">DESC</span>     <span class="n">my</span> <span class="n">workflow</span> <span class="n">description</span> <span class="c1"># to display in Task List</span>
<span class="n">ICON</span>     <span class="n">Maraschino</span>              <span class="c1"># (optional) workflow icon colour</span>
<span class="n">KEYWORDS</span> <span class="n">my</span> <span class="n">own</span> <span class="n">workflow</span>         <span class="c1"># for using in A-Z keyword search</span>

<span class="n">ALLOW_UPLOAD</span>       <span class="c1"># create file upload widgets if started from project root</span>

<span class="c1"># ==========================================================================</span>
<span class="c1"># Input data section. List all data required, "!" specifies mandatory items.</span>
<span class="c1"># Edit template statements below as necessary:</span>

<span class="c1"># !DATA HKL UNMERGED TYPES anomalous</span>
<span class="c1"># !DATA XYZ          TYPES protein dna rna</span>
<span class="c1"># DATA LIBRARY</span>
<span class="c1"># DATA SEQ           TYPES protein dna rna</span>
<span class="c1"># DATA LIGAND</span>

<span class="c1"># ==========================================================================</span>
<span class="c1"># Workflow parameters section. List all parameters required, "!" specifies</span>
<span class="c1"># mandatory items. Edit template statements below as necessary:</span>

<span class="c1"># !PAR_INTEGER nCycles  # variable name to be used in workflow's expressions</span>
<span class="c1">#    LABEL     Number of cycles</span>
<span class="c1">#    TOOLTIP   Number of refiniement cycles</span>
<span class="c1">#    IWIDTH    40        # (optional) input field width is set to 40 pixels</span>
<span class="c1">#    RANGE     0 50      # (optional) allowed min/max values</span>
<span class="c1">#    DEFAULT   10        # (optional) default integer value</span>

<span class="c1"># PAR_REAL     resHigh   # variable name to be used in workflow's expressions</span>
<span class="c1">#    LABEL     High resolution cut-off (&amp;Aring;)</span>
<span class="c1">#    TOOLTIP   High resolution cut-off, angstrom</span>
<span class="c1">#    IWIDTH    40        # input field width is set to 40 pixels</span>
<span class="c1">#    RANGE     0.1 5.0   # allowed min/max values</span>
<span class="c1">#    DEFAULT   1.5       # default real value</span>

<span class="c1"># !PAR_STRING  atomType  # variable name to be used in workflow's expressions</span>
<span class="c1">#    LABEL     Anomalous scatterer</span>
<span class="c1">#    TOOLTIP   Expected main anomalous scatterer</span>
<span class="c1">#    IWIDTH    20        # input field width is set to 20 pixels</span>
<span class="c1">#    MAXLENGTH 2         # (optional) maximum 2 characters</span>
<span class="c1">#    DEFAULT   Se        # (optional) default string value "Se"</span>

<span class="c1"># PAR_CHECK    reqValReport # variable name to be used in workflow's expressions</span>
<span class="c1">#    LABEL     Request PDB Validation Report</span>
<span class="c1">#    TOOLTIP   Check if deposition files should be prepared and PDB validation report obtained</span>
<span class="c1">#    DEFAULT   Unchecked</span>

<span class="c1"># !PAR_COMBO   useBFactors # variable name to be used in workflow's expressions</span>
<span class="c1">#    LABEL     Use isotropic B-factors</span>
<span class="c1">#    TOOLTIP   B-factor mode for refinement</span>
<span class="c1">#    IWIDTH    60        # input field width is set to 60 pixels</span>
<span class="c1">#    OPTION    none  Select from list  # value "none" text "Select from list"</span>
<span class="c1">#    OPTION    yes   Yes               # value "yes"  text "Yes"</span>
<span class="c1">#    OPTION    no    No                # value "no"  text  "No"</span>
<span class="c1">#    DEFAULT   none                    # default string value "none"</span>

<span class="c1"># ==========================================================================</span>
<span class="c1"># Workflow run body</span>
</pre></div>
</div>
<p>In <strong>WScript</strong> lines, everything on the right from the hash “#” sign is a comment
and may be safely deleted. Perhaps you may want to delete first few lines from
the template, but in general, the more comments you make in the script, the more
understandable and maintainable it is. You can use spaces to your aesthetic
preferences; where there must be a space separator, any number of spaces can be
used.</p>
<p><strong>WScript</strong> is based on single-line statements, containing keywords and values.
Keywords, which normally start <strong>WScript</strong> statements, are case-insensitive.
Values, on contrary, should be specified with respect to upper/lower case. Full
list of keywords is given in the end of this document.</p>
<p>We will create new workflow in several steps now.</p>
<section id="simple-mr-workflow">
<h3 id="simple-mr-workflow"><span class="section-number">5.2.1. </span>Simple MR Workflow<a class="headerlink" href="#simple-mr-workflow" title="Permalink to this heading">¶</a></h3>
<p>As first example, let’s write a simple workflow, which takes reflection data,
structure template, sequence and solves structure with Molecular Replacement
using Molrep.</p>
<p>Firstly, remove unnecessary lines and put a reasonable annotation in the
header section of the <strong>WScript</strong> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># -----------------------------------------------------</span>
<span class="c1"># Molecular Replacement with Molrep</span>
<span class="c1"># -----------------------------------------------------</span>
<span class="c1"># Sun Dec 31 2023</span>
<span class="c1">#</span>

<span class="n">VERSION</span>  <span class="mf">1.0</span>    <span class="c1"># script version for backward compatibility</span>
<span class="n">DEBUG</span>    <span class="n">OFF</span>    <span class="c1"># ON/OFF</span>
<span class="n">COMMENTS</span> <span class="n">ON</span>     <span class="c1"># ON/OFF</span>

<span class="c1"># ==========================================================================</span>
<span class="c1"># Workflow header</span>

<span class="c1"># General workflow descriptors</span>
<span class="n">NAME</span>     <span class="n">molrep</span> <span class="n">workflow</span>         <span class="c1"># to show in Job Tree</span>
<span class="n">ONAME</span>    <span class="n">mrp_wflow</span>               <span class="c1"># to use for naming output files</span>
<span class="n">TITLE</span>    <span class="n">Molrep</span><span class="o">-</span><span class="n">based</span> <span class="n">Workflow</span>   <span class="c1"># to display in Task List</span>
<span class="n">DESC</span>     <span class="n">takes</span> <span class="n">HKL</span><span class="p">,</span> <span class="n">XYZ</span> <span class="ow">and</span> <span class="n">SEQ</span> <span class="ow">and</span> <span class="n">solves</span> <span class="n">structure</span> <span class="k">with</span> <span class="n">Molrep</span> <span class="c1"># to display in Task List</span>
<span class="n">ICON</span>     <span class="n">Maraschino</span>              <span class="c1"># (optional) workflow icon colour</span>
<span class="n">KEYWORDS</span> <span class="n">molrep</span> <span class="n">workflow</span>         <span class="c1"># for using in A-Z keyword search</span>

<span class="n">ALLOW_UPLOAD</span>       <span class="c1"># create file upload widgets if started from project root</span>
</pre></div>
</div>
<p>You may save the workflow now and check how its description changed in
<strong>My Workflows</strong> list. Re-open it again by pushing the relevant <strong>Edit</strong> button.</p>
<p>Secondly, specify data, which workflow will use, in <strong>WScript</strong>’s’ input data
section (just append these statements to the script):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># ==========================================================================
# Input data section. List all data required, "!" specifies mandatory items.

!DATA HKL
!DATA XYZ  TYPES protein
!DATA SEQ  TYPES protein
</pre></div>
</div>
<p>These statements mean that the workflow requires 3 mandatory items: reflection
data (HKL), search model (XYZ, must be protein chain(s)) and sequence (SEQ,
also of aminoacid type). In order to understand what these statements do, save
the script and create a new task with it from the root of your project –– you
should see input fields for data files. To check further, run Cloud’s
<strong>File Import</strong> task and import all needed files, then append your workflow as
the next task –– you should see selectors for imported data. You can even run
the workflows now; but it will end immediately because we did not specify any
tasks in the <strong>WScript</strong> file yet.</p>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="jscofe_i1toCloud.html" title="4. Cloud Run facility in CCP4i interface"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> "Previous" </span> <span class="section-number">4. </span>Cloud Run facility in CCP4i interface </span>
              </div>
            </a>
          
          
            <a href="jscofe_archive.html" title="6. CCP4 Cloud Archive"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> "Next" </span> <span class="section-number">6. </span>CCP4 Cloud Archive </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 7.0.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>